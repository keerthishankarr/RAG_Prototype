<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Learning Prototype - Aesop's Fables</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            height: 100vh;
            overflow: hidden;
        }

        .header {
            background: #2563eb;
            color: white;
            padding: 16px 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .header p {
            font-size: 13px;
            opacity: 0.9;
            margin-top: 4px;
        }

        .container {
            display: flex;
            height: calc(100vh - 73px);
            gap: 0;
        }

        .panel {
            background: white;
            overflow-y: auto;
            border-right: 1px solid #e5e7eb;
        }

        .left-panel {
            width: 30%;
            min-width: 300px;
        }

        .center-panel {
            width: 40%;
            min-width: 400px;
            display: flex;
            flex-direction: column;
        }

        .right-panel {
            width: 30%;
            min-width: 300px;
            border-right: none;
        }

        .panel-header {
            padding: 16px 20px;
            border-bottom: 2px solid #e5e7eb;
            background: #f9fafb;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .panel-header h2 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
        }

        .panel-content {
            padding: 20px;
        }

        /* Left Panel - Configuration */
        .section {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .section-title::before {
            content: '';
            width: 3px;
            height: 14px;
            background: #2563eb;
            border-radius: 2px;
        }

        .dataset-card {
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fafafa;
        }

        .dataset-info {
            flex: 1;
        }

        .dataset-name {
            font-size: 13px;
            font-weight: 500;
            color: #1f2937;
        }

        .dataset-meta {
            font-size: 11px;
            color: #6b7280;
            margin-top: 4px;
        }

        .toggle {
            width: 36px;
            height: 20px;
            background: #10b981;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
        }

        .toggle::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            top: 2px;
            right: 2px;
            transition: 0.3s;
        }

        .btn {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            color: #374151;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #f9fafb;
            border-color: #2563eb;
        }

        .btn-primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .btn-primary:hover {
            background: #1d4ed8;
        }

        .form-group {
            margin-bottom: 14px;
        }

        .form-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 6px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 13px;
            background: white;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Center Panel - Chat */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #fafafa;
        }

        .message {
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: #dbeafe;
            color: #2563eb;
        }

        .message.bot .message-avatar {
            background: #e0e7ff;
            color: #4f46e5;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: #2563eb;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-content {
            background: white;
            color: #1f2937;
            border: 1px solid #e5e7eb;
            border-bottom-left-radius: 4px;
        }

        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            margin-left: 44px;
        }

        .action-btn {
            padding: 4px 8px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 11px;
            color: #6b7280;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #f9fafb;
            color: #374151;
        }

        .sample-questions {
            padding: 16px 20px;
            background: #fffbeb;
            border-bottom: 1px solid #fef3c7;
        }

        .sample-questions-title {
            font-size: 12px;
            font-weight: 600;
            color: #92400e;
            margin-bottom: 8px;
        }

        .question-chip {
            display: inline-block;
            padding: 6px 12px;
            margin: 4px 4px 4px 0;
            background: white;
            border: 1px solid #fcd34d;
            border-radius: 16px;
            font-size: 12px;
            color: #92400e;
            cursor: pointer;
            transition: all 0.2s;
        }

        .question-chip:hover {
            background: #fef3c7;
        }

        .chat-input-area {
            padding: 16px 20px;
            border-top: 1px solid #e5e7eb;
            background: white;
        }

        .chat-input-container {
            display: flex;
            gap: 8px;
        }

        .chat-input {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            resize: none;
            font-family: inherit;
        }

        .chat-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .send-btn {
            padding: 10px 20px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .send-btn:hover {
            background: #1d4ed8;
        }

        /* Right Panel - Observability */
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 0;
            margin-bottom: 20px;
        }

        .timeline-step {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border-left: 3px solid #e5e7eb;
            position: relative;
        }

        .timeline-step.active {
            background: #f0f9ff;
            border-left-color: #2563eb;
        }

        .timeline-step::before {
            content: '';
            position: absolute;
            left: -7px;
            top: 16px;
            width: 11px;
            height: 11px;
            border-radius: 50%;
            background: #e5e7eb;
            border: 2px solid white;
        }

        .timeline-step.active::before {
            background: #2563eb;
        }

        .timeline-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            background: #f3f4f6;
            flex-shrink: 0;
        }

        .timeline-step.active .timeline-icon {
            background: #dbeafe;
            color: #2563eb;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-size: 13px;
            font-weight: 600;
            color: #1f2937;
        }

        .timeline-meta {
            font-size: 11px;
            color: #6b7280;
            margin-top: 2px;
        }

        .info-card {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .info-card-title {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 12px;
            border-bottom: 1px solid #e5e7eb;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: #6b7280;
        }

        .info-value {
            color: #1f2937;
            font-weight: 500;
        }

        .chunk-preview {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .chunk-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            padding-bottom: 6px;
            border-bottom: 1px solid #f3f4f6;
        }

        .chunk-source {
            font-weight: 600;
            color: #2563eb;
            font-size: 11px;
        }

        .chunk-score {
            background: #dcfce7;
            color: #166534;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
        }

        .chunk-text {
            color: #4b5563;
            line-height: 1.4;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .badge-success {
            background: #dcfce7;
            color: #166534;
        }

        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü¶ä RAG Learning Prototype - Aesop's Fables</h1>
        <p>Explore how Retrieval-Augmented Generation works with interactive controls and full observability</p>
    </div>

    <div class="container">
        <!-- LEFT PANEL: Configuration -->
        <div class="panel left-panel">
            <div class="panel-header">
                <h2>‚öôÔ∏è Configuration</h2>
            </div>
            <div class="panel-content">
                
                <!-- Dataset Management -->
                <div class="section">
                    <div class="section-title">Dataset Management</div>
                    
                    <div class="dataset-card">
                        <div class="dataset-info">
                            <div class="dataset-name">üìö Aesop's Fables</div>
                            <div class="dataset-meta">587 chunks ‚Ä¢ 145KB ‚Ä¢ Active</div>
                        </div>
                        <div class="toggle"></div>
                    </div>

                    <div class="dataset-card">
                        <div class="dataset-info">
                            <div class="dataset-name">üìñ Grimm's Fairy Tales</div>
                            <div class="dataset-meta">423 chunks ‚Ä¢ 98KB ‚Ä¢ Active</div>
                        </div>
                        <div class="toggle"></div>
                    </div>

                    <button class="btn btn-primary" style="margin-top: 8px;">+ Add Dataset</button>
                </div>

                <!-- Chunking Settings -->
                <div class="section">
                    <div class="section-title">Chunking Settings</div>
                    <div class="form-group">
                        <label class="form-label">Chunk Size (characters)</label>
                        <input type="number" class="form-input" value="500" placeholder="500">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Chunk Overlap</label>
                        <input type="number" class="form-input" value="50" placeholder="50">
                    </div>
                    <button class="btn">Re-chunk & Re-index</button>
                </div>

                <!-- Retrieval Settings -->
                <div class="section">
                    <div class="section-title">Retrieval Settings</div>
                    <div class="form-group">
                        <label class="form-label">Top-K Chunks</label>
                        <input type="number" class="form-input" value="3" placeholder="3">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Similarity Threshold</label>
                        <input type="number" class="form-input" value="0.7" step="0.1" placeholder="0.7">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Embedding Model</label>
                        <select class="form-select">
                            <option>text-embedding-3-small</option>
                            <option>text-embedding-ada-002</option>
                            <option>sentence-transformers</option>
                        </select>
                    </div>
                </div>

                <!-- LLM Settings -->
                <div class="section">
                    <div class="section-title">LLM Settings</div>
                    <div class="form-group">
                        <label class="form-label">Model</label>
                        <select class="form-select">
                            <option>claude-sonnet-4-5</option>
                            <option>gpt-4o</option>
                            <option>gpt-3.5-turbo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Temperature</label>
                        <input type="number" class="form-input" value="0.7" step="0.1" placeholder="0.7">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Max Tokens</label>
                        <input type="number" class="form-input" value="500" placeholder="500">
                    </div>
                </div>

            </div>
        </div>

        <!-- CENTER PANEL: Chat Interface -->
        <div class="panel center-panel">
            <div class="panel-header">
                <h2>üí¨ Chat Interface</h2>
            </div>

            <div class="sample-questions">
                <div class="sample-questions-title">Try these sample questions:</div>
                <span class="question-chip">What lesson does the tortoise teach us?</span>
                <span class="question-chip">Which fables involve foxes?</span>
                <span class="question-chip">Tell me about the boy who cried wolf</span>
            </div>

            <div class="chat-messages">
                <div class="message bot">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        Hello! I'm here to help you explore Aesop's Fables using RAG. Ask me anything about the fables, their characters, or the lessons they teach. You can also check the observability panel on the right to see how I retrieve and process information!
                    </div>
                </div>

                <div class="message user">
                    <div class="message-avatar">You</div>
                    <div class="message-content">
                        What lesson does the tortoise teach us?
                    </div>
                </div>

                <div class="message bot">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        The tortoise teaches us the valuable lesson of perseverance and consistency. In "The Tortoise and the Hare," despite being much slower than the hare, the tortoise wins the race through steady, persistent effort while the overconfident hare takes a nap. The moral is that "slow and steady wins the race" - consistent effort and determination can overcome natural talent when that talent is not applied with discipline.
                    </div>
                </div>
                <div class="message-actions">
                    <button class="action-btn">üëç Good</button>
                    <button class="action-btn">üëé Poor</button>
                    <button class="action-btn">üìù Add Note</button>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-input-container">
                    <textarea class="chat-input" rows="2" placeholder="Ask a question about Aesop's Fables..."></textarea>
                    <button class="send-btn">Send</button>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL: Observability -->
        <div class="panel right-panel">
            <div class="panel-header">
                <h2>üîç Observability Dashboard</h2>
            </div>
            <div class="panel-content">
                
                <!-- Timeline -->
                <div class="section">
                    <div class="section-title">Query Pipeline</div>
                    <div class="timeline">
                        <div class="timeline-step active">
                            <div class="timeline-icon">1</div>
                            <div class="timeline-content">
                                <div class="timeline-title">Query Received</div>
                                <div class="timeline-meta">12ms</div>
                            </div>
                        </div>
                        <div class="timeline-step active">
                            <div class="timeline-icon">2</div>
                            <div class="timeline-content">
                                <div class="timeline-title">Embedding Generated</div>
                                <div class="timeline-meta">45ms</div>
                            </div>
                        </div>
                        <div class="timeline-step active">
                            <div class="timeline-icon">3</div>
                            <div class="timeline-content">
                                <div class="timeline-title">Vector Search</div>
                                <div class="timeline-meta">23ms ‚Ä¢ 3 chunks retrieved</div>
                            </div>
                        </div>
                        <div class="timeline-step active">
                            <div class="timeline-icon">4</div>
                            <div class="timeline-content">
                                <div class="timeline-title">LLM Generation</div>
                                <div class="timeline-meta">1,234ms</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Retrieved Chunks -->
                <div class="section">
                    <div class="section-title">Retrieved Chunks</div>
                    
                    <div class="chunk-preview">
                        <div class="chunk-header">
                            <span class="chunk-source">üìö The Tortoise and the Hare</span>
                            <span class="chunk-score">0.89</span>
                        </div>
                        <div class="chunk-text">
                            A Hare was making fun of the Tortoise one day for being so slow. "Do you ever get anywhere?" he asked with a mocking laugh. "Yes," replied the Tortoise, "and I get there sooner than you think..."
                        </div>
                    </div>

                    <div class="chunk-preview">
                        <div class="chunk-header">
                            <span class="chunk-source">üìö The Tortoise and the Hare</span>
                            <span class="chunk-score">0.85</span>
                        </div>
                        <div class="chunk-text">
                            The Hare was soon far out of sight, and to make the Tortoise feel very deeply how ridiculous it was for him to try a race with a Hare, he lay down beside the course to take a nap...
                        </div>
                    </div>

                    <div class="chunk-preview">
                        <div class="chunk-header">
                            <span class="chunk-source">üìö The Tortoise and the Hare</span>
                            <span class="chunk-score">0.82</span>
                        </div>
                        <div class="chunk-text">
                            The Tortoise meanwhile kept going slowly but steadily, and, after a time, passed the place where the Hare was sleeping. Moral: Slow and steady wins the race.
                        </div>
                    </div>
                </div>

                <!-- LLM Details -->
                <div class="section">
                    <div class="section-title">LLM Details</div>
                    
                    <div class="info-card">
                        <div class="info-card-title">Token Usage</div>
                        <div class="info-row">
                            <span class="info-label">Prompt Tokens</span>
                            <span class="info-value">487</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Completion Tokens</span>
                            <span class="info-value">98</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Total Tokens</span>
                            <span class="info-value">585</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Est. Cost</span>
                            <span class="info-value">$0.0023</span>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">Performance</div>
                        <div class="info-row">
                            <span class="info-label">Total Latency</span>
                            <span class="info-value">1,314ms</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Model</span>
                            <span class="info-value">claude-sonnet-4-5</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Temperature</span>
                            <span class="info-value">0.7</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Simple interactivity demo
        document.querySelectorAll('.question-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                document.querySelector('.chat-input').value = this.textContent;
            });
        });

        document.querySelectorAll('.toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                if (this.style.background === 'rgb(16, 185, 129)' || !this.style.background) {
                    this.style.background = '#d1d5db';
                } else {
                    this.style.background = '#10b981';
                }
            });
        });
    </script>
</body>
</html>